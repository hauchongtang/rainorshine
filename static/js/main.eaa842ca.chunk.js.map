{"version":3,"sources":["api/index.js","components/map/map.jsx","App.js","index.js"],"names":["fetchData","a","axios","get","response","modifiedData","area","data","area_metadata","info","items","console","log","fetch24Data","periods","map","item","regions","Maps","useState","areaData","setArea","infoData","setInfo","valid","setValid","datatwfour","set24Data","current","setPosition","curr","setPos","location","setLocation","useEffect","navigator","geolocation","getCurrentPosition","position","positions","coords","latitude","longitude","lat","long","fetchedData","fetched24","forecasts","valid_period","fetchAPI","w","west","e","east","n","north","s","south","c","central","index","weather","degToRad","deg","Math","PI","pythagorasEquiRectangular","lat1","lon1","lat2","lon2","x","y","sqrt","number","array","closest","minDif","i","length","dif","label_location","nearestPoint","areaArr","forecastArr","forecast","id","Card","CardBody","Date","start","toLocaleTimeString","end","Map","center","zoom","TileLayer","url","attribution","Marker","CircleMarker","key","name","onClick","radius","color","Popup","onClose","href","App","className","ReactDOM","render","document","getElementById"],"mappings":"wVAEaA,EAAS,uCAAG,8BAAAC,EAAA,sEAET,iEAFS,SAGEC,IAAMC,IADjB,kEAFS,cAGfC,EAHe,OAIfC,EAAe,CACnBC,KAAMF,EAASG,KAAKC,cACpBC,KAAML,EAASG,KAAKG,MAAM,IANP,kBAQdL,GARc,gCAUrBM,QAAQC,IAAR,MAVqB,yDAAH,qDAcTC,EAAW,uCAAG,4BAAAZ,EAAA,sEAEX,kEAFW,SAGAC,IAAMC,IADjB,mEAFW,cAGjBC,EAHiB,yBAIfA,EAASG,KAAKG,MAAM,GAAGI,QAAQC,KAAI,SAAAC,GAAI,OAAIA,EAAKC,YAJjC,gCAMvBN,QAAQC,IAAR,MANuB,yDAAH,qDCwJTM,G,MAhKF,WAAO,IAAD,EACWC,mBAAS,IADpB,mBACVC,EADU,KACAC,EADA,OAEWF,mBAAS,IAFpB,mBAEVG,EAFU,KAEAC,EAFA,OAGSJ,mBAAS,IAHlB,mBAGVK,EAHU,KAGHC,EAHG,OAIeN,mBAAS,IAJxB,mBAIVO,EAJU,KAIEC,EAJF,OAKcR,mBAAS,CAAC,OAAQ,WALhC,mBAKVS,EALU,KAKDC,EALC,OAMMV,mBAAS,IANf,mBAMVW,EANU,KAMJC,EANI,OAOeZ,oBAAS,GAPxB,mBAOVa,EAPU,KAOAC,EAPA,KAQjBC,qBAAU,WACRC,UAAUC,YAAYC,oBAAmB,SAACC,GACxC,IAAMC,EAAa,CAACD,EAASE,OAAOC,SAAUH,EAASE,OAAOE,WAC9Db,EAAYU,GACZR,EAAO,CAAEY,IAAKL,EAASE,OAAOC,SAAUG,KAAMN,EAASE,OAAOE,eAElD,uCAAG,kCAAAzC,EAAA,sEACWD,IADX,cACT6C,EADS,gBAEShC,IAFT,OAETiC,EAFS,OAGPxC,EAAeuC,EAAfvC,KAAMG,EAASoC,EAATpC,KACdkB,EAAUmB,GACVzB,EAAQf,GACRiB,EAAQd,EAAKsC,WACbtB,EAAShB,EAAKuC,cAPC,4CAAH,oDASdC,KACC,IAEH,IAAMC,EAAIxB,EAAWX,KAAI,SAAAC,GAAI,OAAIA,EAAKmC,QAChCC,EAAI1B,EAAWX,KAAI,SAAAC,GAAI,OAAIA,EAAKqC,QAChCC,EAAI5B,EAAWX,KAAI,SAAAC,GAAI,OAAIA,EAAKuC,SAChCC,EAAI9B,EAAWX,KAAI,SAAAC,GAAI,OAAIA,EAAKyC,SAChCC,EAAIhC,EAAWX,KAAI,SAAAC,GAAI,OAAIA,EAAK2C,WAEtCvC,EAASL,KAAI,SAACC,EAAM4C,GAAP,OAAiB5C,EAAK6C,QAAUvC,EAASsC,MAEtD,IAAME,EAAW,SAACC,GAChB,OAAOA,EAAMC,KAAKC,GAAK,KAGnBC,EAA4B,SAACC,EAAMC,EAAMC,EAAMC,GACnDH,EAAOL,EAASK,GAChBE,EAAOP,EAASO,GAChBD,EAAON,EAASM,GAEhB,IACIG,GAFJD,EAAOR,EAASQ,IAEAF,EACZI,EAAKH,EAAOF,EAEhB,OAJQ,KAGAH,KAAKS,KAAKF,EAAIA,EAAIC,EAAIA,IAmB1BE,EAfe,SAACjC,EAAUC,EAAWiC,GAGzC,IAFA,IACIC,EADAC,EAAS,MAEJC,EAAI,EAAGA,EAAIH,EAAMI,SAAUD,EAAG,CACrC,IAAIE,EAAMd,EAA0BzB,EAAUC,EAC5CiC,EAAM5D,KAAI,SAACC,GAAD,OAAUA,EAAKiE,eAAexC,YAAUqC,GAClDH,EAAM5D,KAAI,SAAAC,GAAI,OAAIA,EAAKiE,eAAevC,aAAWoC,IAC/CE,EAAMH,IACRD,EAAUE,EACVD,EAASG,GAGb,OAAOJ,EAGMM,CAAapD,EAAKa,IAAKb,EAAKc,KAAMxB,GAC3C+D,EAAU7D,EAASP,KAAI,SAAAC,GAAI,OAAIA,EAAKV,QACpC8E,EAAc9D,EAASP,KAAI,SAAAC,GAAI,OAAIA,EAAKqE,YAC9C,OACE,oCACE,wBAAIC,GAAG,WAAP,qBACA,6BACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,4BAAKL,EAAQT,IACb,uBAAGY,GAAG,aAAa,IAAIG,KAAKjE,EAAMkE,OAAOC,qBAAzC,aAA6E,IAAIF,KAAKjE,EAAMoE,KAAKD,sBACjG,4BAAKP,EAAYV,OAIvB,6BACA,kBAACmB,EAAA,EAAD,CAAKC,OAAQlE,EAASmE,KAAM,IAC1B,kBAACC,EAAA,EAAD,CACEC,IAAI,qDACJC,YAAY,0FAGZ,kBAACC,EAAA,EAAD,CAAQ7D,SAAUV,IAGlBR,EAASL,KAAI,SAAAC,GACX,OACE,kBAACoF,EAAA,EAAD,CACEC,IAAKrF,EAAKsF,KACVR,OAAQ,CACN9E,EAAKiE,eAAexC,SACpBzB,EAAKiE,eAAevC,WAEtB6D,QAAS,kBAAMtE,EAAYjB,IAC3BwF,OAAQ,GACRC,MAAO,cAMbzE,GACE,kBAAC0E,EAAA,EAAD,CACEpE,SAAU,CAACN,EAASiD,eAAexC,SAAUT,EAASiD,eAAevC,WACrEiE,QAAS,kBAAM1E,GAAY,KAE3B,4BAAKD,EAASsE,MACd,2BAAItE,EAAS6B,QAAQwB,YAK7B,6BACA,wBAAIC,GAAG,WAAP,oBACA,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,qCAEA,yDAAiClC,EAAE,IACnC,oDAA4BA,EAAE,IAC9B,0DAAkCA,EAAE,IACpC,qCACA,yDAAiCE,EAAE,IACnC,oDAA4BA,EAAE,IAC9B,0DAAkCA,EAAE,IACpC,oCACA,yDAAiCJ,EAAE,IACnC,oDAA4BA,EAAE,IAC9B,0DAAkCA,EAAE,IACpC,oCACA,yDAAiCF,EAAE,IACnC,oDAA4BA,EAAE,IAC9B,0DAAkCA,EAAE,IACpC,uCACA,yDAAiCQ,EAAE,IACnC,oDAA4BA,EAAE,IAC9B,0DAAkCA,EAAE,MAGxC,6BACA,kBAAC6B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,wCACA,sGACA,kGACA,sCAJF,KAKI,uBAAGoB,KAAK,wBAAR,eACF,oCANF,KAOI,uBAAGA,KAAK,+CAAR,eCnJGC,G,YARH,WACV,OACE,yBAAKC,UAAU,aACb,kBAAC,EAAD,SCLNC,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.eaa842ca.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport const fetchData = async () => {\r\n  try {\r\n    const url = 'https://api.data.gov.sg/v1/environment/2-hour-weather-forecast';\r\n    const response = await axios.get(url);\r\n    const modifiedData = {\r\n      area: response.data.area_metadata,\r\n      info: response.data.items[0]\r\n    }\r\n    return modifiedData;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const fetch24Data = async () => {\r\n  try {\r\n    const url = 'https://api.data.gov.sg/v1/environment/24-hour-weather-forecast';\r\n    const response = await axios.get(url);\r\n    return (response.data.items[0].periods.map(item => item.regions));\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { Map, Popup, TileLayer, CircleMarker, Marker } from 'react-leaflet';\r\nimport { Card, CardBody } from 'reactstrap';\r\n\r\nimport { fetchData, fetch24Data } from '../../api/index';\r\n\r\nimport './map.css';\r\n\r\nconst Maps = () => {\r\n  const [areaData, setArea] = useState([]);\r\n  const [infoData, setInfo] = useState([]);\r\n  const [valid, setValid] = useState([]);\r\n  const [datatwfour, set24Data] = useState([]);\r\n  const [current, setPosition] = useState([1.3521, 103.8198]);\r\n  const [curr, setPos] = useState({});\r\n  const [location, setLocation] = useState(false);\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      const positions = ([position.coords.latitude, position.coords.longitude]);\r\n      setPosition(positions)\r\n      setPos({ lat: position.coords.latitude, long: position.coords.longitude });\r\n    })\r\n    const fetchAPI = async () => {\r\n      const fetchedData = await fetchData();\r\n      const fetched24 = await fetch24Data();\r\n      const { area, info } = fetchedData;\r\n      set24Data(fetched24);\r\n      setArea(area);\r\n      setInfo(info.forecasts);\r\n      setValid(info.valid_period);\r\n    }\r\n    fetchAPI();\r\n  }, []);\r\n\r\n  const w = datatwfour.map(item => item.west);\r\n  const e = datatwfour.map(item => item.east);\r\n  const n = datatwfour.map(item => item.north);\r\n  const s = datatwfour.map(item => item.south);\r\n  const c = datatwfour.map(item => item.central);\r\n\r\n  areaData.map((item, index) => item.weather = infoData[index]);\r\n\r\n  const degToRad = (deg) => {\r\n    return deg * Math.PI / 180;\r\n  }\r\n\r\n  const pythagorasEquiRectangular = (lat1, lon1, lat2, lon2) => {\r\n    lat1 = degToRad(lat1);\r\n    lat2 = degToRad(lat2);\r\n    lon1 = degToRad(lon1);\r\n    lon2 = degToRad(lon2);\r\n    var R = 6371;\r\n    var x = (lon2 - lon1);\r\n    var y = (lat2 - lat1);\r\n    var d = Math.sqrt(x * x + y * y) * R;\r\n    return d;\r\n  }\r\n\r\n  const nearestPoint = (latitude, longitude, array) => {\r\n    var minDif = 99999;\r\n    var closest;\r\n    for (let i = 0; i < array.length; ++i) {\r\n      var dif = pythagorasEquiRectangular(latitude, longitude,\r\n        array.map((item) => item.label_location.latitude)[i],\r\n        array.map(item => item.label_location.longitude)[i]);\r\n      if (dif < minDif) {\r\n        closest = i;\r\n        minDif = dif;\r\n      }\r\n    }\r\n    return closest;\r\n  }\r\n\r\n  const number = nearestPoint(curr.lat, curr.long, areaData);\r\n  const areaArr = infoData.map(item => item.area)\r\n  const forecastArr = infoData.map(item => item.forecast)\r\n  return (\r\n    <>\r\n      <h4 id='weather'>2 Hourly Forecast</h4>\r\n      <div>\r\n        <Card>\r\n          <CardBody>\r\n            <h3>{areaArr[number]}</h3>\r\n            <p id='timestamp'>{new Date(valid.start).toLocaleTimeString()}&nbsp;to&nbsp;{new Date(valid.end).toLocaleTimeString()}</p>\r\n            <h6>{forecastArr[number]}</h6>\r\n          </CardBody>\r\n        </Card>\r\n      </div>\r\n      <h5></h5>\r\n      <Map center={current} zoom={12}>\r\n        <TileLayer\r\n          url='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        />\r\n        {\r\n          <Marker position={current}></Marker>\r\n        }\r\n        {\r\n          areaData.map(item => {\r\n            return (\r\n              <CircleMarker\r\n                key={item.name}\r\n                center={[\r\n                  item.label_location.latitude,\r\n                  item.label_location.longitude\r\n                ]}\r\n                onClick={() => setLocation(item)}\r\n                radius={12}\r\n                color={'purple'}\r\n              />\r\n            )\r\n          })\r\n        }\r\n        {\r\n          location && (\r\n            <Popup\r\n              position={[location.label_location.latitude, location.label_location.longitude]}\r\n              onClose={() => setLocation(false)}\r\n            >\r\n              <h4>{location.name}</h4>\r\n              <p>{location.weather.forecast}</p>\r\n            </Popup>\r\n          )\r\n        }\r\n      </Map>\r\n      <h5></h5>\r\n      <h4 id='weather'>24 Hour Forecast</h4>\r\n      <Card>\r\n        <CardBody>\r\n          <h3>North</h3>\r\n\r\n          <p>Afternoon(12pm to 6pm):&nbsp;{n[0]}</p>\r\n          <p>Night(6pm to 6am):&nbsp;{n[1]}</p>\r\n          <p>Morning(6am to 12 noon):&nbsp;{n[2]}</p>\r\n          <h3>South</h3>\r\n          <p>Afternoon(12pm to 6pm):&nbsp;{s[0]}</p>\r\n          <p>Night(6pm to 6am):&nbsp;{s[1]}</p>\r\n          <p>Morning(6am to 12 noon):&nbsp;{s[2]}</p>\r\n          <h3>East</h3>\r\n          <p>Afternoon(12pm to 6pm):&nbsp;{e[0]}</p>\r\n          <p>Night(6pm to 6am):&nbsp;{e[1]}</p>\r\n          <p>Morning(6am to 12 noon):&nbsp;{e[2]}</p>\r\n          <h3>West</h3>\r\n          <p>Afternoon(12pm to 6pm):&nbsp;{w[0]}</p>\r\n          <p>Night(6pm to 6am):&nbsp;{w[1]}</p>\r\n          <p>Morning(6am to 12 noon):&nbsp;{w[2]}</p>\r\n          <h3>Central</h3>\r\n          <p>Afternoon(12pm to 6pm):&nbsp;{c[0]}</p>\r\n          <p>Night(6pm to 6am):&nbsp;{c[1]}</p>\r\n          <p>Morning(6am to 12 noon):&nbsp;{c[2]}</p>\r\n        </CardBody>\r\n      </Card>\r\n      <h5></h5>\r\n      <Card>\r\n        <CardBody>\r\n          <h3>Features</h3>\r\n          <p>- Quick check of the weather before heading out for outdoor activities.</p>\r\n          <p>- If you enable location, you can see your nearest weather station.</p>\r\n          <h3>Source</h3>\r\n          - <a href='https://data.gov.sg/'>data.gov.sg</a>\r\n          <h3>Code</h3>\r\n          - <a href='https://github.com/hauchongtang/rainorshine'>GitHub</a>\r\n        </CardBody>\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Maps;","import React from 'react';\r\nimport Map from './components/map/map';\r\n\r\nimport './App.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className='container'>\r\n      <Map />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}