{"version":3,"sources":["api/index.js","components/map/map.jsx","App.js","index.js"],"names":["fetchData","a","axios","get","response","modifiedData","area","data","area_metadata","info","items","console","log","fetch24Data","regions","periods","map","item","time","Maps","useState","areaData","setArea","infoData","setInfo","valid","setValid","datatwfour","set24Data","datatwfourtime","set24Time","current","setPosition","curr","setPos","location","setLocation","useEffect","navigator","geolocation","getCurrentPosition","position","positions","coords","latitude","longitude","lat","long","fetchedData","fetched24","forecasts","valid_period","fetchAPI","w","west","e","east","n","north","s","south","c","central","startTime","start","endTime","end","oneStart","Date","toLocaleTimeString","oneEnd","twoStart","twoEnd","threeStart","threeEnd","index","weather","degToRad","deg","Math","PI","pythagorasEquiRectangular","lat1","lon1","lat2","lon2","x","y","sqrt","number","array","closest","minDif","i","length","dif","label_location","nearestPoint","areaArr","forecastArr","forecast","id","Card","CardBody","Map","center","zoom","TileLayer","url","attribution","Marker","CircleMarker","key","name","onClick","radius","color","Popup","onClose","href","App","className","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.53131392.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport const fetchData = async () => {\r\n  try {\r\n    const url = 'https://api.data.gov.sg/v1/environment/2-hour-weather-forecast';\r\n    const response = await axios.get(url);\r\n    const modifiedData = {\r\n      area: response.data.area_metadata,\r\n      info: response.data.items[0]\r\n    }\r\n    return modifiedData;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const fetch24Data = async () => {\r\n  try {\r\n    const url = 'https://api.data.gov.sg/v1/environment/24-hour-weather-forecast';\r\n    const response = await axios.get(url);\r\n    const modifiedData = {\r\n      regions: response.data.items[0].periods.map(item => item.regions),\r\n      time: response.data.items[0].periods.map(item => item.time)\r\n    }\r\n    return modifiedData;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { Map, Popup, TileLayer, CircleMarker, Marker } from 'react-leaflet';\r\nimport { Card, CardBody } from 'reactstrap';\r\n\r\nimport { fetchData, fetch24Data } from '../../api/index';\r\n\r\nimport './map.css';\r\n\r\nconst Maps = () => {\r\n  const [areaData, setArea] = useState([]);\r\n  const [infoData, setInfo] = useState([]);\r\n  const [valid, setValid] = useState([]);\r\n  const [datatwfour, set24Data] = useState([]);\r\n  const [datatwfourtime, set24Time] = useState([]);\r\n  const [current, setPosition] = useState([1.3521, 103.8198]);\r\n  const [curr, setPos] = useState({});\r\n  const [location, setLocation] = useState(false);\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      const positions = ([position.coords.latitude, position.coords.longitude]);\r\n      setPosition(positions)\r\n      setPos({ lat: position.coords.latitude, long: position.coords.longitude });\r\n    })\r\n    const fetchAPI = async () => {\r\n      const fetchedData = await fetchData();\r\n      const fetched24 = await fetch24Data();\r\n      const { area, info } = fetchedData;\r\n      const { regions, time } = fetched24;\r\n      set24Data(regions);\r\n      set24Time(time);\r\n      setArea(area);\r\n      setInfo(info.forecasts);\r\n      setValid(info.valid_period);\r\n    }\r\n    fetchAPI();\r\n  }, []);\r\n\r\n  const w = datatwfour.map(item => item.west);\r\n  const e = datatwfour.map(item => item.east);\r\n  const n = datatwfour.map(item => item.north);\r\n  const s = datatwfour.map(item => item.south);\r\n  const c = datatwfour.map(item => item.central);\r\n\r\n  const startTime = datatwfourtime.map(item => item.start);\r\n  const endTime = datatwfourtime.map(item => item.end);\r\n  const oneStart = new Date(startTime[0]).toLocaleTimeString();\r\n  const oneEnd = new Date(endTime[0]).toLocaleTimeString();\r\n  const twoStart = new Date(startTime[1]).toLocaleTimeString();\r\n  const twoEnd = new Date(endTime[1]).toLocaleTimeString();\r\n  const threeStart = new Date(startTime[2]).toLocaleTimeString();\r\n  const threeEnd = new Date(endTime[2]).toLocaleTimeString();\r\n\r\n  areaData.map((item, index) => item.weather = infoData[index]);\r\n\r\n  const degToRad = (deg) => {\r\n    return deg * Math.PI / 180;\r\n  }\r\n\r\n  const pythagorasEquiRectangular = (lat1, lon1, lat2, lon2) => {\r\n    lat1 = degToRad(lat1);\r\n    lat2 = degToRad(lat2);\r\n    lon1 = degToRad(lon1);\r\n    lon2 = degToRad(lon2);\r\n    var R = 6371;\r\n    var x = (lon2 - lon1);\r\n    var y = (lat2 - lat1);\r\n    var d = Math.sqrt(x * x + y * y) * R;\r\n    return d;\r\n  }\r\n\r\n  const nearestPoint = (latitude, longitude, array) => {\r\n    var minDif = 99999;\r\n    var closest;\r\n    for (let i = 0; i < array.length; ++i) {\r\n      var dif = pythagorasEquiRectangular(latitude, longitude,\r\n        array.map((item) => item.label_location.latitude)[i],\r\n        array.map(item => item.label_location.longitude)[i]);\r\n      if (dif < minDif) {\r\n        closest = i;\r\n        minDif = dif;\r\n      }\r\n    }\r\n    return closest;\r\n  }\r\n\r\n  const number = nearestPoint(curr.lat, curr.long, areaData);\r\n  const areaArr = infoData.map(item => item.area)\r\n  const forecastArr = infoData.map(item => item.forecast)\r\n  return (\r\n    <>\r\n      <h4 id='weather'>2 Hourly Forecast</h4>\r\n      <div>\r\n        <Card>\r\n          <CardBody>\r\n            <h3>{areaArr[number]}</h3>\r\n            <p id='timestamp'>{new Date(valid.start).toLocaleTimeString()}&nbsp;to&nbsp;{new Date(valid.end).toLocaleTimeString()}</p>\r\n            <h6>{forecastArr[number]}</h6>\r\n          </CardBody>\r\n        </Card>\r\n      </div>\r\n      <h5></h5>\r\n      <Map center={current} zoom={12}>\r\n        <TileLayer\r\n          url='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        />\r\n        {\r\n          <Marker position={current}></Marker>\r\n        }\r\n        {\r\n          areaData.map(item => {\r\n            return (\r\n              <CircleMarker\r\n                key={item.name}\r\n                center={[\r\n                  item.label_location.latitude,\r\n                  item.label_location.longitude\r\n                ]}\r\n                onClick={() => setLocation(item)}\r\n                radius={12}\r\n                color={'purple'}\r\n              />\r\n            )\r\n          })\r\n        }\r\n        {\r\n          location && (\r\n            <Popup\r\n              position={[location.label_location.latitude, location.label_location.longitude]}\r\n              onClose={() => setLocation(false)}\r\n            >\r\n              <h4>{location.name}</h4>\r\n              <p>{location.weather.forecast}</p>\r\n            </Popup>\r\n          )\r\n        }\r\n      </Map>\r\n      <h5></h5>\r\n      <h4 id='weather'>24 Hour Forecast</h4>\r\n      <Card>\r\n        <CardBody>\r\n          <h3>North</h3>\r\n          <p id='time'>{oneStart}&nbsp;to&nbsp;{oneEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{n[0]}</h6>\r\n          <p id='time'>{twoStart}&nbsp;to&nbsp;{twoEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{n[1]}</h6>\r\n          <p id='time'>{threeStart}&nbsp;to&nbsp;{threeEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{n[2]}</h6>\r\n          <h3>South</h3>\r\n          <p id='time'>{oneStart}&nbsp;to&nbsp;{oneEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{s[0]}</h6>\r\n          <p id='time'>{twoStart}&nbsp;to&nbsp;{twoEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{s[1]}</h6>\r\n          <p id='time'>{threeStart}&nbsp;to&nbsp;{threeEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{s[2]}</h6>\r\n          <h3>East</h3>\r\n          <p id='time'>{oneStart}&nbsp;to&nbsp;{oneEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{e[0]}</h6>\r\n          <p id='time'>{twoStart}&nbsp;to&nbsp;{twoEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{e[1]}</h6>\r\n          <p id='time'>{threeStart}&nbsp;to&nbsp;{threeEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{e[2]}</h6>\r\n          <h3>West</h3>\r\n          <p id='time'>{oneStart}&nbsp;to&nbsp;{oneEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{w[0]}</h6>\r\n          <p id='time'>{twoStart}&nbsp;to&nbsp;{twoEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{w[1]}</h6>\r\n          <p id='time'>{threeStart}&nbsp;to&nbsp;{threeEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{w[2]}</h6>\r\n          <h3>Central</h3>\r\n          <p id='time'>{oneStart}&nbsp;to&nbsp;{oneEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{c[0]}</h6>\r\n          <p id='time'>{twoStart}&nbsp;to&nbsp;{twoEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{c[1]}</h6>\r\n          <p id='time'>{threeStart}&nbsp;to&nbsp;{threeEnd}&nbsp;:&nbsp;</p>\r\n          <h6>{c[2]}</h6>\r\n        </CardBody>\r\n      </Card>\r\n      <h5></h5>\r\n      <Card>\r\n        <CardBody>\r\n          <h3>Features</h3>\r\n          <p>- Quick check of the weather before heading out for outdoor activities.</p>\r\n          <p>- If you enable location, you can see your nearest weather station.</p>\r\n          <h3>Source</h3>\r\n          - <a href='https://data.gov.sg/'>data.gov.sg</a>\r\n          <h3>Code</h3>\r\n          - <a href='https://github.com/hauchongtang/rainorshine'>GitHub</a>\r\n        </CardBody>\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Maps;","import React from 'react';\r\nimport Map from './components/map/map';\r\n\r\nimport './App.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className='container'>\r\n      <Map />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}